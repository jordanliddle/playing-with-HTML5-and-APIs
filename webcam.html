<!DOCTYPE html>
<html lang="en">
<head>
	<title>Snapshot Application</title>
	<style>
	section {
		float: left;
		width: 320px;
		height: 240px;
		border: 1px solid #000000;
	}
	</style>
	<script>
	var video, canvas;
	function initiate() {
		navigator.webkitGetUserMedia({video:true}, success, showerror);
	}
	function success(stream) {
		var elem = document.getElementById('canvas');
		canvas = elem.getContext('2d');
		var player = document.getElementById("player");
		player.addEventListener('click', snapshot);
		
		video = document.getElementById("media");
		video.setAttribute('src', URL.createObjectURL(stream));
		video.play();
	}
	function showerror(e){
		console.log(e);
	}
	function snapshot() {
		canvas.drawImage(video,0,0,320,240);
	}
	addEventListener('load',initiate);
	</script>
</head>
<body>
	<section id="player">
		<video id="media" width="320" height="240"></video>
	</section>
	<section>
		<canvas id="canvas" width="320" height="240"></canvas>
	</section>
</body>
</html>
